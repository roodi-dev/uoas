{% extends 'base.html' %}
{% block title %}Order Tracking | uoas{% endblock %}
{% block content %}
<h2>Order Tracking</h2>
<form method="get">
    <label for="email">Enter your email to track your orders:</label><br>
    <input type="email" id="email" name="email" value="{{ email }}" required>
    <button type="submit">Track</button>
</form>
{% if orders %}
    <h3>Your Orders</h3>
    <ul>
    {% for order in orders %}
        <li>
            <strong>Order #{{ order.id }}</strong> - {{ order.status|title }}<br>
            Placed: {{ order.created_at|date:'Y-m-d H:i' }}<br>
            <a href="/order/{{ order.id }}/{{ order.email }}/">View Details</a>
            Items:
            <ul>
            {% for item in order.items.all %}
                <li>{{ item.product.name }} x {{ item.quantity }} (R{{ item.price }})</li>
            {% endfor %}
            </ul>
        </li>
    {% endfor %}
    </ul>
{% elif email %}
    <p>No orders found for this email.</p>
{% endif %}
{% endblock %}
